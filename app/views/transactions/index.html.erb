<div class ="col-xs-6 float box">
  <h5>Status codes</h5>
  <ul>
    <li>1 - Working</li>
    <li>2 - In progress</li>
    <li>3 - Cancelled: No response from borrower</li>
    <li>4 - Cancelled: No response from lender</li>
    <li>5 - Cancelled: Time period too long</li>
    <li>6 - Cancelled: No inventory available</li>
    <li>7 - Cancelled: Borrowed instead</li>
    <li>8 - Cancelled: Rented instead</li>
    <li>9 - Cancelled: Bought instead</li>
    <li>10 - Cancelled: Occasion for use cancelled</li>  
    <li>11 - Complete: A-OK</li>
    <li>12 - Complete: damages/repairs paid</li> 
    <li>13 - Complete: replacement paid</li>
  </ul> 
</div>

<div class="col-xs-12 box">
  <%= search_form_for @q, url: url_for(controller: 'transactions', action: 'index')  do |f| %>
    <div class="form group">
      <%= f.label :status_eq %>
      <%= f.select :status_eq, Transaction.all.pluck(:status).uniq, :include_blank => true %>
    </div>
    <div class="form group">
      <%= f.label :item_id_eq, "Item ID equals"%>
      <%= f.search_field :item_id_eq %>
    </div>
    <div class="form group">
      <%= f.label :name_eq %>
      <%= f.select :name_eq, Transaction.all.pluck(:name).uniq, :include_blank => true %>
    </div>
    <div class="form group">
      <%= f.label :request_signup_email_cont %>
      <%= f.search_field :request_signup_email_cont %>
    </div>
    <div class="form group">
      <%= f.label :request_pickupdate_eq, "Pickup date on" %>
      <%= f.search_field :request_pickupdate_eq %>
      <%= f.label :request_returndate_eq, "Return date on" %>
      <%= f.search_field :request_returndate_eq %>
    </div>
    <div class="form group">
      <%= f.label :request_pickupdate_gteq, "Pickup date on or after"%>
      <%= f.search_field :request_pickupdate_gteq %>
      <%= f.label :request_returndate_lteq, "Return date on or before"%>
      <%= f.search_field :request_returndate_lteq %>
    </div>
    <div class="form group">
      <%= f.submit %>
    </div>
  <% end %>
</div>

<div class="table-responsive">
  <table class="table table-condensed table-hover">
    <thead>
      <tr>
        <th><%= sort_link(@q, :status, "Status") %></th>
        <th><%= sort_link(@q, :item_id, "Item ID") %></th>
        <th><%= sort_link(@q, :name, "Item") %></th>
        <th><%= sort_link(@q, 'requests.signup.email', "Email") %></th>
        <th><%= sort_link(@q, 'requests.pickupdate', "Pick up date") %></th>
        <th><%= sort_link(@q, 'requests.returndate', "Returndate") %></th>
        <th>Action</th>
        <th colspan="5"></th>
      </tr>
    </thead>

    <tbody>
      <% @transactions.each do |transaction| %>
        <tr>
          <td><%= transaction.status %></td>
          <td><%= transaction.item_id %></td>
          <td><%= transaction.name %></td>
          <td><%= transaction.request.signup.email %></td>
          <td><%= transaction.request.pickupdate.to_date %></td>
          <td><%= transaction.request.returndate.to_date %></td>
          <td>
            <%= link_to 'Update' %> <!--update status and item_id, but everything can be udpated. DO NOT REMOVE, remove is handled by a specific status code -->
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

