<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      #map-canvas {
        height: 500px;
        margin: 0px;
        padding: 0px
      }
    </style>
    <%="<script type='text/javascript'
      src='https://maps.googleapis.com/maps/api/js?key=#{ENV['GoogleMap']}&libraries=geometry'></script>".html_safe %>
    <script>
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 13,
          center: new google.maps.LatLng(gon.borrower.latitude, gon.borrower.longitude) 
        };

        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

      

        var markers = {};
        var infowindows = {};
        $.each( gon.jbuilder, function (counter, lender) { 
          var contentString = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">'+ lender.email + '</h1>'+
            '<div id="bodyContent">'+
            '<ul>' +
            $.map( lender.inventories, function (inventory, counter) {
              if (inventory.description == null || inventory.description == "") {
                var description = ''
              } else {
                var description = ': ' + inventory.description
              };
              return '<li>' + inventory.name + description + '</li>';
            }).join('') +
            '</ul>' +
            '</div>'+
            '</div>';
          markers[counter] = new google.maps.Marker({
            position: new google.maps.LatLng(lender.latitude, lender.longitude),
            map: map,
            title: lender.email
          });
          infowindows[counter] = new google.maps.InfoWindow({
            content: contentString
          });
          markers[counter].setMap(map);
          google.maps.event.addListener(markers[counter], 'click', function() {
            infowindows[counter].open(map,markers[counter]);
          });
        });
      };
      google.maps.event.addDomListener(window, 'load', initialize);

        // var infowindow = new google.maps.InfoWindow({
        //     content: contentString
        // });
    </script>
  </head>
  <body>
  	<div class="col-xs-2">
			<h4>CART</h4>
			<ul>
				<li>
				</li>
			</ul>
	  </div>
    <div class="col-xs-6" id="map-canvas">
    </div>
  </body>
</html>

<!-- <table class="table table-condensed table-hover">
    <thead>
      <tr>
        <th class="col-xs-2">Email</th>
      </tr>
    </thead>

    <tbody>
      <tr>
		<%# @lenders.each do |l| %>
		  <td><%#= "#{l.email}" %></td>
		<%# end %>
	  </tr>
	</tbody>
</table>  

<script>
</script>
 -->


